'use strict';

exports.__esModule = true;
exports.default = fetchJSON;

var _Observable = require('rxjs/Observable');

require('rxjs/add/observable/fromPromise');

require('rxjs/add/operator/mergeMap');

global.self = global;
require('imports?this=>global!exports?global.fetch!isomorphic-fetch');

function fetchJSON(url) {
  return _Observable.Observable.fromPromise(fetch(url)).mergeMap(function (response) {
    var contentType = response.headers.get('content-type');
    if (contentType && contentType.indexOf('application/json') !== -1) {
      return response.json();
    } else {
      return response.text().then(function (resp) {
        return {
          error: 'Response was not json',
          responseBody: resp
        };
      });
    }
  });
}
//# sourceMappingURL=fetch.js.map